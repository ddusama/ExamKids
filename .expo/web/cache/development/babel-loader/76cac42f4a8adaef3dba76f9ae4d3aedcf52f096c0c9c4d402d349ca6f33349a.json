{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport axiosClient from \"../config/axiosConfig\";\nimport React, { createContext, useState } from 'react';\nimport jwt_decode from \"jwt-decode\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var AuthContext = createContext();\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    userToken = _useState2[0],\n    setUserToken = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    userInfo = _useState4[0],\n    setUserInfo = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isLoading = _useState6[0],\n    setIsLoading = _useState6[1];\n  var signUp = function () {\n    var _ref2 = _asyncToGenerator(function* (data) {\n      try {\n        setIsLoading(true);\n        var response = yield axiosClient.post('/api/v1/auth/register', data);\n        setIsLoading(false);\n        var token = response.data.token;\n        setUserToken(token);\n        setUserInfo(jwt_decode(token));\n      } catch (e) {\n        setIsLoading(false);\n        throw e;\n      }\n    });\n    return function signUp(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var login = function () {\n    var _ref4 = _asyncToGenerator(function* (_ref3) {\n      var email = _ref3.email,\n        password = _ref3.password;\n      try {\n        setIsLoading(true);\n        setIsLoading(false);\n        var token = \"eyJhbGciOiJIUzI1NiJ9.eyJjZWR1bGEiOiIxNzUwODUzNTQ5IiwibmFtZSI6IlBhYmxvIiwic3ViIjoicGFibG9AZ21haWwuY29tIiwiaWF0IjoxNjkxODUyOTk4LCJleHAiOjE2OTE4NTMxNzh9.Zkvdw549wd0N-aLZJ8Z9Bp22qUzDeRjw2tLvd-zsCl8\";\n        setUserToken(token);\n        setUserInfo(jwt_decode(token));\n      } catch (e) {\n        setIsLoading(false);\n        throw e;\n      }\n    });\n    return function login(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var logout = function logout() {\n    console.log('Logout');\n    setUserToken(null);\n    setUserInfo(null);\n  };\n  return _jsx(AuthContext.Provider, {\n    value: {\n      login: login,\n      logout: logout,\n      signUp: signUp,\n      isLoading: isLoading,\n      userToken: userToken,\n      userInfo: userInfo\n    },\n    children: children\n  });\n};","map":{"version":3,"names":["axiosClient","React","createContext","useState","jwt_decode","jsx","_jsx","AuthContext","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","userToken","setUserToken","_useState3","_useState4","userInfo","setUserInfo","_useState5","_useState6","isLoading","setIsLoading","signUp","_ref2","_asyncToGenerator","data","response","post","token","e","_x","apply","arguments","login","_ref4","_ref3","email","password","_x2","logout","console","log","Provider","value"],"sources":["/Users/pablocaiza/Documents/derma-app/frontend-examkids/src/context/AuthContext.js"],"sourcesContent":["import axiosClient from \"../config/axiosConfig\";\nimport React, {createContext, useState} from 'react'\nimport jwt_decode from \"jwt-decode\";\n\nexport const AuthContext = createContext();\n\n\nexport const AuthProvider = ({children}) => {\n    const [userToken, setUserToken] = useState(null)\n    const [userInfo, setUserInfo] = useState(null)\n    const [isLoading, setIsLoading] = useState(false)\n\n    const signUp = async (data) => {\n        try {\n            setIsLoading(true)\n            const response = await axiosClient.post('/api/v1/auth/register', data)\n            setIsLoading(false)\n            const token = response.data.token;\n            setUserToken(token)\n            setUserInfo(jwt_decode(token))\n        } catch (e) {\n            setIsLoading(false)\n            throw e;\n        }\n    }\n    const login = async ({email, password}) => {\n        try {\n            setIsLoading(true)\n            // const response = await axiosClient.post('/api/v1/auth/authenticate', {\n            //     email,\n            //     password\n            // })\n            setIsLoading(false)\n            const token = \"eyJhbGciOiJIUzI1NiJ9.eyJjZWR1bGEiOiIxNzUwODUzNTQ5IiwibmFtZSI6IlBhYmxvIiwic3ViIjoicGFibG9AZ21haWwuY29tIiwiaWF0IjoxNjkxODUyOTk4LCJleHAiOjE2OTE4NTMxNzh9.Zkvdw549wd0N-aLZJ8Z9Bp22qUzDeRjw2tLvd-zsCl8\"\n\n            setUserToken(token)\n            setUserInfo(jwt_decode(token))\n        } catch (e) {\n            setIsLoading(false)\n            throw e;\n        }\n    }\n    const logout = () => {\n        console.log('Logout')\n        setUserToken(null)\n        setUserInfo(null)\n    }\n\n    return (\n        <AuthContext.Provider value={{login, logout, signUp, isLoading, userToken, userInfo}}>\n            {children}\n        </AuthContext.Provider>\n    )\n}"],"mappings":";;AAAA,OAAOA,WAAW;AAClB,OAAOC,KAAK,IAAGC,aAAa,EAAEC,QAAQ,QAAO,OAAO;AACpD,OAAOC,UAAU,MAAM,YAAY;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAEpC,OAAO,IAAMC,WAAW,GAAGL,aAAa,CAAC,CAAC;AAG1C,OAAO,IAAMM,YAAY,GAAG,SAAfA,YAAYA,CAAAC,IAAA,EAAmB;EAAA,IAAdC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EAClC,IAAAC,SAAA,GAAkCR,QAAQ,CAAC,IAAI,CAAC;IAAAS,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAzCG,SAAS,GAAAF,UAAA;IAAEG,YAAY,GAAAH,UAAA;EAC9B,IAAAI,UAAA,GAAgCb,QAAQ,CAAC,IAAI,CAAC;IAAAc,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAAvCE,QAAQ,GAAAD,UAAA;IAAEE,WAAW,GAAAF,UAAA;EAC5B,IAAAG,UAAA,GAAkCjB,QAAQ,CAAC,KAAK,CAAC;IAAAkB,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAA1CE,SAAS,GAAAD,UAAA;IAAEE,YAAY,GAAAF,UAAA;EAE9B,IAAMG,MAAM;IAAA,IAAAC,KAAA,GAAAC,iBAAA,CAAG,WAAOC,IAAI,EAAK;MAC3B,IAAI;QACAJ,YAAY,CAAC,IAAI,CAAC;QAClB,IAAMK,QAAQ,SAAS5B,WAAW,CAAC6B,IAAI,CAAC,uBAAuB,EAAEF,IAAI,CAAC;QACtEJ,YAAY,CAAC,KAAK,CAAC;QACnB,IAAMO,KAAK,GAAGF,QAAQ,CAACD,IAAI,CAACG,KAAK;QACjCf,YAAY,CAACe,KAAK,CAAC;QACnBX,WAAW,CAACf,UAAU,CAAC0B,KAAK,CAAC,CAAC;MAClC,CAAC,CAAC,OAAOC,CAAC,EAAE;QACRR,YAAY,CAAC,KAAK,CAAC;QACnB,MAAMQ,CAAC;MACX;IACJ,CAAC;IAAA,gBAZKP,MAAMA,CAAAQ,EAAA;MAAA,OAAAP,KAAA,CAAAQ,KAAA,OAAAC,SAAA;IAAA;EAAA,GAYX;EACD,IAAMC,KAAK;IAAA,IAAAC,KAAA,GAAAV,iBAAA,CAAG,WAAAW,KAAA,EAA6B;MAAA,IAArBC,KAAK,GAAAD,KAAA,CAALC,KAAK;QAAEC,QAAQ,GAAAF,KAAA,CAARE,QAAQ;MACjC,IAAI;QACAhB,YAAY,CAAC,IAAI,CAAC;QAKlBA,YAAY,CAAC,KAAK,CAAC;QACnB,IAAMO,KAAK,GAAG,mMAAmM;QAEjNf,YAAY,CAACe,KAAK,CAAC;QACnBX,WAAW,CAACf,UAAU,CAAC0B,KAAK,CAAC,CAAC;MAClC,CAAC,CAAC,OAAOC,CAAC,EAAE;QACRR,YAAY,CAAC,KAAK,CAAC;QACnB,MAAMQ,CAAC;MACX;IACJ,CAAC;IAAA,gBAhBKI,KAAKA,CAAAK,GAAA;MAAA,OAAAJ,KAAA,CAAAH,KAAA,OAAAC,SAAA;IAAA;EAAA,GAgBV;EACD,IAAMO,MAAM,GAAG,SAATA,MAAMA,CAAA,EAAS;IACjBC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;IACrB5B,YAAY,CAAC,IAAI,CAAC;IAClBI,WAAW,CAAC,IAAI,CAAC;EACrB,CAAC;EAED,OACIb,IAAA,CAACC,WAAW,CAACqC,QAAQ;IAACC,KAAK,EAAE;MAACV,KAAK,EAALA,KAAK;MAAEM,MAAM,EAANA,MAAM;MAAEjB,MAAM,EAANA,MAAM;MAAEF,SAAS,EAATA,SAAS;MAAER,SAAS,EAATA,SAAS;MAAEI,QAAQ,EAARA;IAAQ,CAAE;IAAAR,QAAA,EAChFA;EAAQ,CACS,CAAC;AAE/B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}